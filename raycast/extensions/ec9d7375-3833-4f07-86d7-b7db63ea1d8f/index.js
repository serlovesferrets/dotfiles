"use strict";var h=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var I=Object.prototype.hasOwnProperty;var T=(t,e)=>{for(var i in e)h(t,i,{get:e[i],enumerable:!0})},D=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of B(e))!I.call(t,n)&&n!==i&&h(t,n,{get:()=>e[n],enumerable:!(s=P(e,n))||s.enumerable});return t};var N=t=>D(h({},"__esModule",{value:!0}),t);var A={};T(A,{default:()=>F});module.exports=N(A);var S=require("react"),l=require("@raycast/api");var d=class{constructor(e){this.sign=0;this.exponent=0;this.mantissa="0";this.floatBinary="";this.fixedBinary=e,this.setSign(),this.setExponentAndMantissa(),this.setFloatBinary()}getMantissa(){return this.mantissa}getExponent(){return this.exponent}getSign(){return this.sign}getFloatBinary(){return this.floatBinary}},p=class extends d{constructor(e){super(e)}setExponentAndMantissa(){let{delta:e,mantissa:i}=y(this.fixedBinary);this.exponent=e+127,this.mantissa=i}getMantissa(){return this.mantissa}setSign(){console.log(this.fixedBinary[0]),this.fixedBinary[0]==="-"?this.sign=1:this.sign=0}setFloatBinary(){this.mantissa.length>23&&(this.mantissa=this.mantissa.slice(0,23)),this.floatBinary=this.sign.toString()+" "+this.exponent.toString(2)+"0".repeat(8-this.exponent.toString(2).length)+" "+this.mantissa+"0".repeat(23-this.mantissa.length)}getFloatDecimal(){let e=0;for(let i=0;i<this.mantissa.length;i++)e+=parseInt(this.mantissa[i])*Math.pow(2,-1*(i+1));return e+=1,e*=Math.pow(2,this.exponent-127),this.sign===1&&(e*=-1),e.toString()}},u=class extends d{getFloatDecimal(){let e=0;for(let i=0;i<this.mantissa.length;i++)e+=parseInt(this.mantissa[i])*Math.pow(2,-1*(i+1));return e+=1,e*=Math.pow(2,this.exponent-1023),this.sign===1&&(e*=-1),e.toString()}constructor(e){super(e)}setExponentAndMantissa(){let{delta:e,mantissa:i}=y(this.fixedBinary);this.exponent=e+1023,this.mantissa=i}getMantissa(){return this.mantissa}setSign(){this.fixedBinary[0]==="-"?this.sign=1:this.sign=0}setFloatBinary(){this.mantissa.length>52&&(this.mantissa=this.mantissa.slice(0,52)),this.floatBinary=this.sign.toString()+" "+this.exponent.toString(2)+"0".repeat(11-this.exponent.toString(2).length)+" "+this.mantissa+"0".repeat(52-this.mantissa.length)}};function y(t){t=t.replace("-",""),t=t.replace("+",""),t=t.replace(",",".");let e=t.split(""),i=e.indexOf("."),s=NaN,n=NaN;e=e.filter(function(g){return g!=","}),console.log(e);for(let g=0;g<e.length;g++)if(e[g]==="1"){s=g;break}console.log("closest one index: "+s),console.log("comma index: "+i);let r=i-s,a;return console.log(r),isNaN(n)?a=e.slice(s+1).join("").replace(",","").replace(".",""):a=e.slice(n+1).join("").replace(",","").replace(".",""),{delta:r,mantissa:a}}function f(t){return t.slice(0,1)=="-"?"-":""}function v(t,e){let i=new p(t),s=new u(t),n=i.getFloatDecimal(),r=s.getFloatDecimal(),a=t.includes(",")?t.split(","):t.split("."),g=t.slice(0,1)+parseInt(a[0],2)+parseInt(a[1],2)/2**a[1].length;e({inputType:"Binary with comma",binNumber:t,decNumber:g.toString(),hexNumber:"",binFloat:{singlePrecision:{sign:i.getSign().toString(),exponent:i.getExponent().toString(),mantissa:i.getMantissa().toString(),floatingPoint:i.getFloatBinary().toString(),floatDecimal:n.toString()},doublePrecision:{sign:s.getSign().toString(),exponent:s.getExponent().toString(),mantissa:s.getMantissa().toString(),floatingPoint:s.getFloatBinary().toString(),floatDecimal:r.toString()}}})}function M(t,e){let i=t.includes(",")?t.split(","):t.split("."),s=parseInt(i[0]).toString(2),n="",r="0."+i[1],a=parseFloat(r);for(let b=0;b<64&&a!=0;b++)a>=1?(n+="1",a--):n+="0",a*=2;let g=f(t)+s+"."+n.slice(1),c=new p(g),m=new u(g);e({inputType:"Decimal with comma",binNumber:f(t)=="-"?g.slice(0,10):g.slice(0,9),decNumber:t,hexNumber:"",binFloat:{singlePrecision:{sign:c.getSign().toString(),exponent:c.getExponent().toString(),mantissa:c.getMantissa().toString(),floatingPoint:c.getFloatBinary().toString(),floatDecimal:c.getFloatDecimal()},doublePrecision:{sign:m.getSign().toString(),exponent:m.getExponent().toString(),mantissa:m.getMantissa().toString(),floatingPoint:m.getFloatBinary().toString(),floatDecimal:m.getFloatDecimal()}}})}function x(t,e){if(t=t.replaceAll(" ",""),console.log(t),t.replace("-","").slice(2).match(/^-?[0-1]+[,.][0-1]+$/)&&t.replace("-","").slice(0,2)=="0b")console.log("Binary comma"),v(t,e);else if(t.match(/^-?[0-9]+[.,][0-9]+$/))M(t,e);else{let i=t.split(/([+*/%^-])/),s=[];for(let a=0;a<i.length;a++)i[a]!=""&&!i[a].match(/([+*/%^-])/)?s.push(w(i[a])):s.push(i[a]);console.log(s);let n=s[0],r=[n.type];for(let a=1;a<s.length;a+=2){let g=s[a],c=s[a+1];if(c.number==null||n.number==null)break;switch(r.push(g),g){case"+":n.number+=c.number,r.push(c.type);break;case"-":n.number-=c.number,r.push(c.type);break;case"*":n.number*=c.number,r.push(c.type);break;case"/":n.number/=c.number,r.push(c.type);break;case"%":n.number%=c.number,r.push(c.type);break;case"^":n.number**=c.number,r.push(c.type);break;default:break}}n.number==null&&(n={number:0,type:""}),e({inputType:r.toString().replaceAll(","," ")??"",binNumber:n.number.toString(2),decNumber:n.number.toString(),hexNumber:n.number.toString(16),binFloat:void 0})}}function w(t){let e={"0b":{radix:2,type:"Binary"},"0x":{radix:16,type:"Hexadecimal"},"0o":{radix:8,type:"Octal"}},i=10,s="Decimal";return t.slice(0,2)in e&&(i=e[t.slice(0,2)].radix,s=e[t.slice(0,2)].type,t=t.slice(2)),{number:parseInt(t,i),type:s}}var o=require("react/jsx-runtime");function F(){let[t,e]=(0,S.useState)({binNumber:"",decNumber:"",hexNumber:"",binFloat:void 0,inputType:""}),i=[(0,o.jsx)(l.List.Item,{title:"Detected Input",accessoryTitle:t.inputType}),(0,o.jsx)(l.List.Item,{title:"Binary Representation",accessoryTitle:t.binNumber}),(0,o.jsx)(l.List.Item,{title:"Decimal Representation",accessoryTitle:t.decNumber}),(0,o.jsx)(l.List.Item,{title:"Hexadecimal Representation",accessoryTitle:t.hexNumber})],s=[(0,o.jsx)(l.List.Item,{title:"Detected Input",accessoryTitle:t.inputType}),(0,o.jsx)(l.List.Item,{title:"Fixed Point Binary Representation",accessoryTitle:t.binNumber}),(0,o.jsx)(l.List.Item,{title:"Fixed Point Decimal Representation",accessoryTitle:t.decNumber}),(0,o.jsxs)(l.List.Section,{title:"Floating Point Binary Representation \u2014 Single Precision",children:[(0,o.jsx)(l.List.Item,{title:"Sign",accessoryTitle:t.binFloat?.singlePrecision.sign}),(0,o.jsx)(l.List.Item,{title:"Exponent",accessoryTitle:t.binFloat?.singlePrecision.exponent}),(0,o.jsx)(l.List.Item,{title:"Mantissa",accessoryTitle:t.binFloat?.singlePrecision.mantissa}),(0,o.jsx)(l.List.Item,{title:"Floating Point",accessoryTitle:t.binFloat?.singlePrecision.floatingPoint}),(0,o.jsx)(l.List.Item,{title:"Floating Point Decimal",accessoryTitle:t.binFloat?.singlePrecision.floatDecimal})]}),(0,o.jsxs)(l.List.Section,{title:"Floating Point Binary Representation \u2014 Double Precision",children:[(0,o.jsx)(l.List.Item,{title:"Sign",accessoryTitle:t.binFloat?.doublePrecision.sign}),(0,o.jsx)(l.List.Item,{title:"Exponent",accessoryTitle:t.binFloat?.doublePrecision.exponent}),(0,o.jsx)(l.List.Item,{title:"Mantissa",accessoryTitle:t.binFloat?.doublePrecision.mantissa}),(0,o.jsx)(l.List.Item,{title:"Floating Point",accessoryTitle:t.binFloat?.doublePrecision.floatingPoint}),(0,o.jsx)(l.List.Item,{title:"Floating Point Decimal",accessoryTitle:t.binFloat?.doublePrecision.floatDecimal})]})],n=t.inputType==="Binary with comma"||t.inputType==="Decimal with comma";return(0,o.jsx)(l.List,{isLoading:!t.inputType,searchBarPlaceholder:"Enter your calculation: 0b0101+0xff...",onSearchTextChange:async r=>{x(r,e)},children:n?s.map(r=>r):i.map(r=>r)})}
